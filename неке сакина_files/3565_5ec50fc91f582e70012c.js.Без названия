(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3565,4881],{12926:function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},77847:function(t){t.exports=s,s.default=s,s.stable=h,s.stableStringify=h;var e="[...]",i="[Circular]",n=[],r=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(t,e,i,s){var a;void 0===s&&(s=o()),u(t,"",0,[],void 0,0,s);try{a=0===r.length?JSON.stringify(t,e,i):JSON.stringify(t,c(e),i)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var l=n.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return a}function a(t,e,i,o){var s=Object.getOwnPropertyDescriptor(o,i);void 0!==s.get?s.configurable?(Object.defineProperty(o,i,{value:t}),n.push([o,i,e,s])):r.push([e,i,t]):(o[i]=t,n.push([o,i,e]))}function u(t,n,r,o,s,l,h){var p;if(l+=1,"object"==typeof t&&null!==t){for(p=0;p<o.length;p++)if(o[p]===t)return void a(i,t,n,s);if(void 0!==h.depthLimit&&l>h.depthLimit)return void a(e,t,n,s);if(void 0!==h.edgesLimit&&r+1>h.edgesLimit)return void a(e,t,n,s);if(o.push(t),Array.isArray(t))for(p=0;p<t.length;p++)u(t[p],p,p,o,t,l,h);else{var c=Object.keys(t);for(p=0;p<c.length;p++){var f=c[p];u(t[f],f,p,o,t,l,h)}}o.pop()}}function l(t,e){return t<e?-1:t>e?1:0}function h(t,e,i,s){void 0===s&&(s=o());var a,u=p(t,"",0,[],void 0,0,s)||t;try{a=0===r.length?JSON.stringify(u,e,i):JSON.stringify(u,c(e),i)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var l=n.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return a}function p(t,r,o,s,u,h,c){var f;if(h+=1,"object"==typeof t&&null!==t){for(f=0;f<s.length;f++)if(s[f]===t)return void a(i,t,r,u);try{if("function"==typeof t.toJSON)return}catch(t){return}if(void 0!==c.depthLimit&&h>c.depthLimit)return void a(e,t,r,u);if(void 0!==c.edgesLimit&&o+1>c.edgesLimit)return void a(e,t,r,u);if(s.push(t),Array.isArray(t))for(f=0;f<t.length;f++)p(t[f],f,f,s,t,h,c);else{var d={},g=Object.keys(t).sort(l);for(f=0;f<g.length;f++){var y=g[f];p(t[y],y,f,s,t,h,c),d[y]=t[y]}if(void 0===u)return d;n.push([u,r,t]),u[r]=d}s.pop()}}function c(t){return t=void 0!==t?t:function(t,e){return e},function(e,i){if(r.length>0)for(var n=0;n<r.length;n++){var o=r[n];if(o[1]===e&&o[0]===i){i=o[2],r.splice(n,1);break}}return t.call(this,e,i)}}},66545:function(t){"use strict";function e(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(t){n.prototype[t]=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this._defaults.push({fn:t,args:i}),this}})),n.prototype._setDefaults=function(t){this._defaults.forEach((function(i){t[i.fn].apply(t,e(i.args))}))},t.exports=n},139:function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var r;"undefined"!=typeof window?r=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),r=void 0):r=self;var o=i(12926),s=i(77847),a=i(19126),u=i(2474),l=i(73354),h=i(99228),p=i(66545);function c(){}t.exports=function(t,i){return"function"==typeof i?new e.Request("GET",t).end(i):1===arguments.length?new e.Request("GET",t):new e.Request(t,i)};var f=e=t.exports;e.Request=b,f.getXHR=function(){if(r.XMLHttpRequest&&(!r.location||"file:"!==r.location.protocol||!r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function g(t){if(!l(t))return t;var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&y(e,i,t[i]);return e.join("&")}function y(t,e,i){if(void 0!==i)if(null!==i)if(Array.isArray(i))i.forEach((function(i){y(t,e,i)}));else if(l(i))for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&y(t,"".concat(e,"[").concat(n,"]"),i[n]);else t.push(encodeURI(e)+"="+encodeURIComponent(i));else t.push(encodeURI(e))}function m(t){for(var e,i,n={},r=t.split("&"),o=0,s=r.length;o<s;++o)-1===(i=(e=r[o]).indexOf("="))?n[decodeURIComponent(e)]="":n[decodeURIComponent(e.slice(0,i))]=decodeURIComponent(e.slice(i+1));return n}function v(t){return/[/+]json($|[^-\w])/i.test(t)}function _(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,i,n,r,o=t.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)-1!==(e=(i=o[a]).indexOf(":"))&&(n=i.slice(0,e).toLowerCase(),r=d(i.slice(e+1)),s[n]=r);return s}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function b(t,e){var i=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",(function(){var t,e=null,n=null;try{n=new _(i)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,i.xhr?(e.rawResponse=void 0===i.xhr.responseType?i.xhr.responseText:i.xhr.response,e.status=i.xhr.status?i.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),i.callback(e)}i.emit("response",n);try{i._isResponseOK(n)||(t=new Error(n.statusText||n.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=n,t.status=n.status,i.callback(t,n)):i.callback(null,n)}))}function E(t,e,i){var n=f("DELETE",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n}f.serializeObject=g,f.parseString=m,f.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":a.stringify,"application/json":s},f.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},h(_.prototype),_.prototype._parseBody=function(t){var e=f.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&v(this.type)&&(e=f.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},_.prototype.toError=function(){var t=this.req,e=t.method,i=t.url,n="cannot ".concat(e," ").concat(i," (").concat(this.status,")"),r=new Error(n);return r.status=this.status,r.method=e,r.url=i,r},f.Response=_,o(b.prototype),u(b.prototype),b.prototype.type=function(t){return this.set("Content-Type",f.types[t]||t),this},b.prototype.accept=function(t){return this.set("Accept",f.types[t]||t),this},b.prototype.auth=function(t,e,i){1===arguments.length&&(e=""),"object"===n(e)&&null!==e&&(i=e,e=""),i||(i={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,i,(function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")}))},b.prototype.query=function(t){return"string"!=typeof t&&(t=g(t)),t&&this._query.push(t),this},b.prototype.attach=function(t,e,i){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,i||e.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var i=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),i(t,e)},b.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.ca=b.prototype.agent,b.prototype.buffer=b.prototype.ca,b.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},b.prototype.pipe=b.prototype.write,b.prototype._isHost=function(t){return t&&"object"===n(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},b.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||c,this._finalizeQueryString(),this._end()},b.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},b.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=f.getXHR();var e=this.xhr,i=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var i=e.readyState;if(i>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===i){var n;try{n=e.status}catch(t){n=0}if(!n){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var n=function(e,i){i.total>0&&(i.percent=i.loaded/i.total*100,100===i.percent&&clearTimeout(t._uploadTimeoutTimer)),i.direction=e,t.emit("progress",i)};if(this.hasListeners("progress"))try{e.addEventListener("progress",n.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",n.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof i&&!this._isHost(i)){var r=this._header["content-type"],o=this._serializer||f.serialize[r?r.split(";")[0]:""];!o&&v(r)&&(o=f.serialize["application/json"]),o&&(i=o(i))}for(var s in this.header)null!==this.header[s]&&Object.prototype.hasOwnProperty.call(this.header,s)&&e.setRequestHeader(s,this.header[s]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===i?null:i)},f.agent=function(){return new p},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(t){p.prototype[t.toLowerCase()]=function(e,i){var n=new f.Request(t,e);return this._setDefaults(n),i&&n.end(i),n}})),p.prototype.del=p.prototype.delete,f.get=function(t,e,i){var n=f("GET",t);return"function"==typeof e&&(i=e,e=null),e&&n.query(e),i&&n.end(i),n},f.head=function(t,e,i){var n=f("HEAD",t);return"function"==typeof e&&(i=e,e=null),e&&n.query(e),i&&n.end(i),n},f.options=function(t,e,i){var n=f("OPTIONS",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},f.del=E,f.delete=E,f.patch=function(t,e,i){var n=f("PATCH",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},f.post=function(t,e,i){var n=f("POST",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},f.put=function(t,e,i){var n=f("PUT",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n}},73354:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}t.exports=function(t){return null!==t&&"object"===e(t)}},2474:function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var r=i(73354);function o(t){if(t)return function(t){for(var e in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,e)&&(t[e]=o.prototype[e]);return t}(t)}t.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},o.prototype.parse=function(t){return this._parser=t,this},o.prototype.responseType=function(t){return this._responseType=t,this},o.prototype.serialize=function(t){return this._serializer=t,this},o.prototype.timeout=function(t){if(!t||"object"!==n(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},o.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),a=new Set([408,413,429,500,502,503,504,521,522,524]);o.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var i=this._retryCallback(t,e);if(!0===i)return!0;if(!1===i)return!1}catch(t){console.error(t)}if(e&&e.status&&a.has(e.status))return!0;if(t){if(t.code&&s.has(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},o.prototype.then=function(t,e){var i=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(t,e){n.on("abort",(function(){if(!(i._maxRetries&&i._maxRetries>i._retries))if(i.timedout&&i.timedoutError)e(i.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=i.status,t.method=i.method,t.url=i.url,e(t)}})),n.end((function(i,n){i?e(i):t(n)}))}))}return this._fullfilledPromise.then(t,e)},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.use=function(t){return t(this),this},o.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},o.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},o.prototype.get=function(t){return this._header[t.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(t,e){if(r(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.set(i,t[i]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},o.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},o.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(r(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.field(i,t[i]);return this}if(Array.isArray(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.field(t,e[n]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},o.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},o.prototype._auth=function(t,e,i,n){switch(i.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},o.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},o.prototype.redirects=function(t){return this._maxRedirects=t,this},o.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(t){var e=r(t),i=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&r(this._data))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._data[n]=t[n]);else"string"==typeof t?(i||this.type("form"),(i=this._header["content-type"])&&(i=i.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===i?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||i||this.type("json"),this},o.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},o.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var i=this.url.slice(e+1).split("&");"function"==typeof this._sort?i.sort(this._sort):i.sort(),this.url=this.url.slice(0,e)+"?"+i.join("&")}}},o.prototype._appendQueryString=function(){console.warn("Unsupported")},o.prototype._timeoutError=function(t,e,i){if(!this._aborted){var n=new Error("".concat(t+e,"ms exceeded"));n.timeout=e,n.code="ECONNABORTED",n.errno=i,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}},o.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},99228:function(t,e,i){"use strict";var n=i(62433);function r(t){if(t)return function(t){for(var e in r.prototype)Object.prototype.hasOwnProperty.call(r.prototype,e)&&(t[e]=r.prototype[e]);return t}(t)}t.exports=r,r.prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=n.type(e);var i=n.params(e);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(this[r]=i[r]);this.links={};try{t.link&&(this.links=n.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},62433:function(t,e){"use strict";function i(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(u)throw s}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){var e,n={},r=i(t.split(/ *; */));try{for(r.s();!(e=r.n()).done;){var o=e.value.split(/ *= */),s=o.shift(),a=o.shift();s&&a&&(n[s]=a)}}catch(t){r.e(t)}finally{r.f()}return n},e.parseLinks=function(t){var e,n={},r=i(t.split(/ *, */));try{for(r.s();!(e=r.n()).done;){var o=e.value.split(/ *; */),s=o[0].slice(1,-1);n[o[1].split(/ *= */)[1].slice(1,-1)]=s}}catch(t){r.e(t)}finally{r.f()}return n},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},63565:function(t,e,i){"use strict";i.d(e,{ZB:function(){return ct},qA:function(){return Q},cJ:function(){return n},ZP:function(){return ft}});i(92374),i(4256),i(17385),i(66479),i(90399),i(95696),i(91211),i(70309),i(99492),i(80978),i(11183),i(44936),i(21531),i(87246);var n,r=i(139),o=i.n(r),s=(i(69867),i(44718),i(28088),i(60452),i(23395),i(60647),i(91560),i(31002),i(25731),i(78529),{SUCCESS:{CODE:0,MSG:""},AUTH_FAILED:{CODE:1,MSG:"authentication failed."},FILE_EMPTY:{CODE:2,MSG:"upload file is not set."},SIGNATURE_HOST_EMPTY:{CODE:3,MSG:"signature host is not set."},GET_SIGNATURE_FAIL:{CODE:4,MSG:"get signature failed."},GET_ENDPOINT_FAIL:{CODE:5,MSG:"get endpoint failed."},SCENE_ID_EMPTY:{CODE:6,MSG:"scene id is not set."},UPLOAD_HOST_EMPTY:{CODE:7,MSG:"upload host is not set."},DOMAIN_PREFIX_EMPTY:{CODE:8,MSG:"current scene requires custom domain prefix. call .setDomainPrefix() before init."},MEDIA_TYPE_UNKNOWN:{CODE:10,MSG:"content type is empty."},BIG_INIT_FAIL:{CODE:15,MSG:"multipart init request failed."},BIG_PART_FAIL:{CODE:16,MSG:"multipart upload request failed."},BIG_COMPLETE_FAIL:{CODE:17,MSG:"multipart complete request failed."},BIG_CHECK_SIZE_FAIL:{CODE:18,MSG:"check multipart upload size failed."},SCENE_UNKNOWN:{CODE:19,MSG:"scene is not set yet."},PRODUCT_UNKNOWN:{CODE:20,MSG:"isProduct is not set yet."},TAG_UNKNOWN:{CODE:21,MSG:"tag is empty."},TOKEN_UNKNOWN:{CODE:22,MSG:"token should not be empty at current scene."},IMAGE_PROCESS_CONFIG_ERROR:{CODE:23,MSG:"image process config error."},CLIENT_NOT_INIT:{CODE:24,MSG:"init function should be called before create request."},IMAGE_UPLOAD_FAILED:{CODE:25,MSG:"image upload failed."},IMAGE_PROCESS_NUMBER_EXCEED:{CODE:26,MSG:"the image processing rules exceed the maximum limit of 5."},FILE_UPLOAD_FAILED:{CODE:27,MSG:"file upload failed."},MIN_SIZE_OF_SPLIT_ERROR:{CODE:28,MSG:"the minimum size of split upload param is error."},CHUNK_SIZE_ERROR:{CODE:29,MSG:"chunk size should be 1 ~ 20MB and not larger than the minimum size of split upload."},URL_SIGN_UNKONW:{CODE:30,MSG:"unexpected url sign param."},SPLIT_FILE_FAILED:{CODE:31,MSG:"split file failed, make sure proper file is set."},RETRY_COUNT_ERROR:{CODE:32,MSG:"retry count should in range of [0, 2]."},CONCURRENCY_ERROR:{CODE:33,MSG:"concurrency number should in range of [1, 10]."},REQUEST_ABORTED:{CODE:34,MSG:"request aborted."}}),a=function(t,e,i){var n,r;void 0===e&&(e=null),void 0===i&&(i=s.SUCCESS);var o=(null==e?void 0:e.response)||e;t||null==e||(e=(null==e?void 0:e.body)||(null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.body)||e),(e instanceof Error||(null==e?void 0:e.stack)&&e.message)&&(e=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e))));var a={success:t,result:e,details:{status:null==o?void 0:o.status,headers:null==o?void 0:o.headers},errorCode:i.CODE,errorMsg:i.MSG};return 403===a.details.status&&40001===(null===(r=a.result)||void 0===r?void 0:r.error_code)&&(a.errorCode=s.AUTH_FAILED.CODE,a.errorMsg=s.AUTH_FAILED.MSG),a},u=function(t){if("object"!=typeof t||null===t)return!1;var e=Object.keys(t);return!!(e.includes("success")&&e.includes("result")&&e.includes("errorCode")&&e.includes("errorMsg"))},l=function(t){return Buffer.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")},h=function(t){var e={url:t.url,imageInfo:{width:t.width,height:t.height,size:t.size}};return t.etag&&(e.imageInfo.etag=t.etag),t.processed_urls&&0!==t.processed_urls.length&&(e.processedUrls=t.processed_urls.map((function(t){return{url:t}}))),e},p=function(t){return t?1048576*t:0},c=function(t,e){if(!t||!t.size||"function"!=typeof t.slice)throw a(!1,null,s.SPLIT_FILE_FAILED);for(var i=t.size,n=0,r=n+e,o=[];n<i;){var u=t.slice(n,r);o.push(u),n=r,r=Math.min(n+e,i)}return o},f=function(){function t(t,e){this.max=t,this.fn=e,this.pool=[],this.requests=[],this.executedPool=[],this.fullfilled=!1,this.index=0,this.results=[]}return t.prototype.abort=function(){this.executedPool.forEach((function(t){return t.abort()})),this.fullfilled=!0,this.reject(a(!1,null,s.REQUEST_ABORTED))},t.prototype.start=function(t){var e=this;for(this.requests=t;this.pool.length<this.max;)this.setTask(this.requests.shift(),this.index++);return new Promise((function(t,i){e.reject=i,e.resolve=t,e.run(Promise.race(e.pool))}))},t.prototype.run=function(t){var e=this;this.fullfilled||t.then((function(){e.setTask(e.requests.shift(),e.index++),0===e.pool.length?(e.fullfilled=!0,e.resolve(e.results)):e.run(Promise.race(e.pool))}))},t.prototype.setTask=function(t,e){var i=this;if(t){this.executedPool.push(t);var n=this.fn(t,e);this.pool.push(n),n.then((function(t){i.results[e]=t,i.pool.splice(i.pool.indexOf(n),1)})).catch((function(t){i.fullfilled=!0,i.reject(t)}))}},t}(),d=function(t,e){var i,n=null,r=0,o=function(){r=+new Date,n=null,t.apply(null,i)};return function(){var s=+new Date,a=e-(s-r);i=arguments,a<=0||a>e?(n&&(clearTimeout(n),n=null),r=s,t.apply(null,i)):n||(n=setTimeout(o,a))}},g="{{prefix}}";!function(t){t[t.PUBLIC_C_US=1]="PUBLIC_C_US",t[t.PUBLIC_C_CA=2]="PUBLIC_C_CA",t[t.C_END_US=7]="C_END_US",t[t.C_END_CA=8]="C_END_CA",t[t.GENERAL=10]="GENERAL",t[t.C_END_NZ=13]="C_END_NZ",t[t.C_END_AU=14]="C_END_AU",t[t.C_END_UK=15]="C_END_UK",t[t.C_END_PREFIX=16]="C_END_PREFIX"}(n||(n={}));var y,m={test:"us.file.temudemo.com",prod:"us.file.temu.com"},v={test:"ca.file.temudemo.com",prod:"ca.file.temu.com"},_={endpoint:{test:"",prod:""},path:"/get_endpoint"},b={image:"/api/galerie/v3/store_image",file:"/api/galerie/general_file",multipart:{init:"/api/galerie/cos_large_file/upload_init",upload:"/api/galerie/cos_large_file/upload_part",complete:"/api/galerie/cos_large_file/upload_complete"},video:"/api/galerie/v1/store_video",videoMultipart:{init:"/api/galerie/large_file/v1/video/upload_init",upload:"/api/galerie/large_file/v1/video/upload_part",complete:"/api/galerie/large_file/v1/video/upload_complete"}},E={PUBLIC_C_US:{endpoint:{test:"us.temudemo.com",prod:"us.temu.com"},uploadPath:b,uploadHost:m,path:"/api/galerie/public/signature",dynamicUploadConfig:_},PUBLIC_C_CA:{endpoint:{test:"ca.temudemo.com",prod:"ca.temu.com"},uploadPath:b,uploadHost:v,path:"/api/galerie/public/signature",dynamicUploadConfig:_},C_END_US:{endpoint:{test:"us.temudemo.com",prod:"us.temu.com"},uploadPath:b,uploadHost:m,path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_},C_END_CA:{endpoint:{test:"ca.temudemo.com",prod:"ca.temu.com"},uploadPath:b,uploadHost:v,path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_},C_END_NZ:{endpoint:{test:"nz.temudemo.com",prod:"nz.temu.com"},uploadPath:b,uploadHost:{test:"nz.file.temudemo.com",prod:"nz.file.temu.com"},path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_},C_END_AU:{endpoint:{test:"au.temudemo.com",prod:"au.temu.com"},uploadPath:b,uploadHost:{test:"au.file.temudemo.com",prod:"au.file.temu.com"},path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_},C_END_UK:{endpoint:{test:"uk.temudemo.com",prod:"uk.temu.com"},uploadPath:b,uploadHost:{test:"uk.file.temudemo.com",prod:"uk.file.temu.com"},path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_},C_END_PREFIX:{endpoint:{test:g+".temudemo.com",prod:g+".temu.com"},uploadPath:b,uploadHost:{test:g+".file.temudemo.com",prod:g+".file.temu.com"},path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",filePath:"/api/galerie/file/signature",tokenName:"AccessToken",forceToken:!1,dynamicUploadConfig:_,usePrefix:!0},GENERAL:{endpoint:{test:"",prod:""},uploadPath:b,uploadHost:{test:"",prod:""},path:"/general_auth/get_signature",dynamicUploadConfig:_}};!function(t){t.Ahronbd="ahronbd.ttf",t.Arial="arial.ttf",t.Ariblk="ariblk.ttf",t.Helvetica="Helvetica.dfont",t.HelveticaNeue="HelveticaNeue.dfont"}(y||(y={}));var C,w,T,S,O;i(69460);!function(t){t[t.LimitMinAndCrop=1]="LimitMinAndCrop",t[t.LimitMaxWidthAndHeight=2]="LimitMaxWidthAndHeight",t[t.LimitMinWidthAndHeight=3]="LimitMinWidthAndHeight",t[t.LimitMinLongAndShortEdge=4]="LimitMinLongAndShortEdge",t[t.LimitMaxLongAndShortEdge=5]="LimitMaxLongAndShortEdge"}(C||(C={})),function(t){t.JPG="jpg",t.BMP="bmp",t.GIF="gif",t.PNG="png",t.WEBP="webp"}(w||(w={})),function(t){t[t.NONE=0]="NONE",t[t.PRIVATE_SIGN=1]="PRIVATE_SIGN",t[t.CDN_SIGN=2]="CDN_SIGN"}(T||(T={})),function(t){t.North="north",t.Northeast="northeast",t.West="west",t.Center="center",t.East="east",t.Southwest="southwest",t.South="south",t.Southeast="southeast"}(S||(S={})),function(t){t[t.Normal=0]="Normal",t[t.Multipart=1]="Multipart"}(O||(O={}));var A=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},x=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},P=function(){function t(t){var e=t.client,i=t.agent;this.withImageOperation=!1,this.errorCollection=[],this.fileData=null,this.rules=[],this.originalNeed=!1,this.extraInfo=null,this.urlSignType=T.NONE,this.signature=void 0,this.useRemoteEndpoint=!1,this.uploadEndpoint="",this.endpointUid="",this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=i,this.request=null,this.uploadUrl=this.globalConfig.uploadUrl}return t.prototype.buildUploadRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.image).field({url_width_height:!0}).attach("image",this.fileData),this.withImageOperation&&this.buildImageProcessParams(),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.field({filename:this.filename}),this.urlSignType!==T.NONE&&this.request.field({url_sign:this.urlSignType}),this.globalConfig.language&&this.request.set({"iris-context-client-language":this.globalConfig.language}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.build=function(){var t;return A(this,void 0,void 0,(function(){var e,i,n,r;return x(this,(function(o){switch(o.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(a(!1,null,s.FILE_EMPTY))];case 1:return[2,o.sent()];case 2:return this.withImageOperation?0===this.errorCollection.length?[3,4]:[4,Promise.reject(a(!1,this.errorCollection.join(", "),s.IMAGE_PROCESS_CONFIG_ERROR))]:[3,6];case 3:return[2,o.sent()];case 4:return this.rules.length>5?[4,Promise.reject(a(!1,null,s.IMAGE_PROCESS_CONFIG_ERROR))]:[3,6];case 5:return[2,o.sent()];case 6:return o.trys.push([6,12,,14]),this.useRemoteEndpoint?(e=this,[4,this.client.getEndpoint(this.endpointUid)]):[3,8];case 7:e.uploadEndpoint=o.sent(),this.uploadUrl=this.client.getUploadUrl(this.uploadEndpoint),o.label=8;case 8:return this.buildUploadRequest(),this.signature?[3,10]:(i=this,[4,this.client.getSignature("image",this.headers)]);case 9:i.signature=o.sent(),o.label=10;case 10:if(this.isAborted)throw a(!1,null,s.REQUEST_ABORTED);return[4,this.request.field({upload_sign:this.signature})];case 11:if(n=o.sent(),null===(t=null==n?void 0:n.body)||void 0===t?void 0:t.url)return[2,h(null==n?void 0:n.body)];throw a(!1,n,s.IMAGE_UPLOAD_FAILED);case 12:return r=o.sent(),[4,Promise.reject(u(r)?r:a(!1,r,r&&"ABORTED"===r.code?s.REQUEST_ABORTED:s.IMAGE_UPLOAD_FAILED))];case 13:return[2,o.sent()];case 14:return[2]}}))}))},t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildImageProcessParams=function(){var t,e={original_needed:this.originalNeed,rules:this.rules};null===(t=this.request)||void 0===t||t.field({pic_operations:JSON.stringify(e)})},t.prototype.abort=function(){var t;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.saveOriginalImage=function(){return this.originalNeed=!0,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setFilename=function(t){return this.filename=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setSignature=function(t){return this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.setUseRemoteEndpoint=function(t){return this.useRemoteEndpoint=!0,t&&(this.endpointUid=t),this},t.prototype.addImageOperation=function(t){this.withImageOperation=!0;var e=t.getRule();return this.rules.push(e),this.errorCollection=this.errorCollection.concat(t.getErrorCollection()),this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),I=P,R=(i(5127),i(55984),i(97380),i(41990),i(41224),i(90527),i(49834),i(58151),i(145),i(71697),i(9394),i(91636),i(24319),i(26848),i(29226),i(34706),i(84385),i(99941),i(3364),i(28609),i(16727),i(13438),i(37028),i(25320),i(53616),i(42423),i(35630),i(30896),i(6822),i(24139),i(81991),i(36867),i(77581),i(51855),i(7444),i(65845),i(17125),i(65978),function(){function t(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}var e=t.prototype;return e.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},e.appendStr=function(e){var i,n,r=this._buffer8,o=this._buffer32,s=this._bufferLength;for(n=0;n<e.length;n+=1){if((i=e.charCodeAt(n))<128)r[s++]=i;else if(i<2048)r[s++]=192+(i>>>6),r[s++]=63&i|128;else if(i<55296||i>56319)r[s++]=224+(i>>>12),r[s++]=i>>>6&63|128,r[s++]=63&i|128;else{if((i=1024*(i-55296)+(e.charCodeAt(++n)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[s++]=240+(i>>>18),r[s++]=i>>>12&63|128,r[s++]=i>>>6&63|128,r[s++]=63&i|128}s>=64&&(this._dataLength+=64,t._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this},e.appendAsciiStr=function(e){for(var i,n=this._buffer8,r=this._buffer32,o=this._bufferLength,s=0;;){for(i=Math.min(e.length-s,64-o);i--;)n[o++]=e.charCodeAt(s++);if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,r),o=0}return this._bufferLength=o,this},e.appendByteArray=function(e){for(var i,n=this._buffer8,r=this._buffer32,o=this._bufferLength,s=0;;){for(i=Math.min(e.length-s,64-o);i--;)n[o++]=e[s++];if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,r),o=0}return this._bufferLength=o,this},e.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.setState=function(t){var e,i=t.buffer,n=t.state,r=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],e=0;e<i.length;e+=1)this._buffer8[e]=i.charCodeAt(e)},e.end=function(e){void 0===e&&(e=!1);var i=this._bufferLength,n=this._buffer8,r=this._buffer32,o=1+(i>>2);this._dataLength+=i;var s=8*this._dataLength;if(n[i]=128,n[i+1]=n[i+2]=n[i+3]=0,r.set(t.buffer32Identity.subarray(o),o),i>55&&(t._md5cycle(this._state,r),r.set(t.buffer32Identity)),s<=4294967295)r[14]=s;else{var a=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),l=parseInt(a[1],16)||0;r[14]=u,r[15]=l}return t._md5cycle(this._state,r),e?this._state:t._hex(this._state)},t.hashStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},t.hashAsciiStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},t._hex=function(e){var i,n,r,o,s=t.hexChars,a=t.hexOut;for(o=0;o<4;o+=1)for(n=8*o,i=e[o],r=0;r<8;r+=2)a[n+1+r]=s.charAt(15&i),i>>>=4,a[n+0+r]=s.charAt(15&i),i>>>=4;return a.join("")},t._md5cycle=function(t,e){var i=t[0],n=t[1],r=t[2],o=t[3];n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+e[0]-680876936|0)<<7|i>>>25)+n|0)&n|~i&r)+e[1]-389564586|0)<<12|o>>>20)+i|0)&i|~o&n)+e[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&i)+e[3]-1044525330|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+e[4]-176418897|0)<<7|i>>>25)+n|0)&n|~i&r)+e[5]+1200080426|0)<<12|o>>>20)+i|0)&i|~o&n)+e[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&i)+e[7]-45705983|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+e[8]+1770035416|0)<<7|i>>>25)+n|0)&n|~i&r)+e[9]-1958414417|0)<<12|o>>>20)+i|0)&i|~o&n)+e[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&i)+e[11]-1990404162|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&r|~n&o)+e[12]+1804603682|0)<<7|i>>>25)+n|0)&n|~i&r)+e[13]-40341101|0)<<12|o>>>20)+i|0)&i|~o&n)+e[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&i)+e[15]+1236535329|0)<<22|n>>>10)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+e[1]-165796510|0)<<5|i>>>27)+n|0)&r|n&~r)+e[6]-1069501632|0)<<9|o>>>23)+i|0)&n|i&~n)+e[11]+643717713|0)<<14|r>>>18)+o|0)&i|o&~i)+e[0]-373897302|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+e[5]-701558691|0)<<5|i>>>27)+n|0)&r|n&~r)+e[10]+38016083|0)<<9|o>>>23)+i|0)&n|i&~n)+e[15]-660478335|0)<<14|r>>>18)+o|0)&i|o&~i)+e[4]-405537848|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+e[9]+568446438|0)<<5|i>>>27)+n|0)&r|n&~r)+e[14]-1019803690|0)<<9|o>>>23)+i|0)&n|i&~n)+e[3]-187363961|0)<<14|r>>>18)+o|0)&i|o&~i)+e[8]+1163531501|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n&o|r&~o)+e[13]-1444681467|0)<<5|i>>>27)+n|0)&r|n&~r)+e[2]-51403784|0)<<9|o>>>23)+i|0)&n|i&~n)+e[7]+1735328473|0)<<14|r>>>18)+o|0)&i|o&~i)+e[12]-1926607734|0)<<20|n>>>12)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+e[5]-378558|0)<<4|i>>>28)+n|0)^n^r)+e[8]-2022574463|0)<<11|o>>>21)+i|0)^i^n)+e[11]+1839030562|0)<<16|r>>>16)+o|0)^o^i)+e[14]-35309556|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+e[1]-1530992060|0)<<4|i>>>28)+n|0)^n^r)+e[4]+1272893353|0)<<11|o>>>21)+i|0)^i^n)+e[7]-155497632|0)<<16|r>>>16)+o|0)^o^i)+e[10]-1094730640|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+e[13]+681279174|0)<<4|i>>>28)+n|0)^n^r)+e[0]-358537222|0)<<11|o>>>21)+i|0)^i^n)+e[3]-722521979|0)<<16|r>>>16)+o|0)^o^i)+e[6]+76029189|0)<<23|n>>>9)+r|0,n=((n+=((r=((r+=((o=((o+=((i=((i+=(n^r^o)+e[9]-640364487|0)<<4|i>>>28)+n|0)^n^r)+e[12]-421815835|0)<<11|o>>>21)+i|0)^i^n)+e[15]+530742520|0)<<16|r>>>16)+o|0)^o^i)+e[2]-995338651|0)<<23|n>>>9)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+e[0]-198630844|0)<<6|i>>>26)+n|0)|~r))+e[7]+1126891415|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+e[14]-1416354905|0)<<15|r>>>17)+o|0)|~i))+e[5]-57434055|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+e[12]+1700485571|0)<<6|i>>>26)+n|0)|~r))+e[3]-1894986606|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+e[10]-1051523|0)<<15|r>>>17)+o|0)|~i))+e[1]-2054922799|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+e[8]+1873313359|0)<<6|i>>>26)+n|0)|~r))+e[15]-30611744|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+e[6]-1560198380|0)<<15|r>>>17)+o|0)|~i))+e[13]+1309151649|0)<<21|n>>>11)+r|0,n=((n+=((o=((o+=(n^((i=((i+=(r^(n|~o))+e[4]-145523070|0)<<6|i>>>26)+n|0)|~r))+e[11]-1120210379|0)<<10|o>>>22)+i|0)^((r=((r+=(i^(o|~n))+e[2]+718787259|0)<<15|r>>>17)+o|0)|~i))+e[9]-343485551|0)<<21|n>>>11)+r|0,t[0]=i+t[0]|0,t[1]=n+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0},t}());if(R.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),R.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),R.hexChars="0123456789abcdef",R.hexOut=[],R.onePassHasher=new R,"5d41402abc4b2a76b9719d911017c592"!==R.hashStr("hello"))throw new Error("Md5 self test failed.");i(5150);var N,D=function(){return D=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},D.apply(this,arguments)},U=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},k=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},L=function(){function t(t){var e=t.client,i=t.agent;this.fileData=null,this.extraInfo=null,this.urlSignType=T.NONE,this.uploadType=O.Normal,this.partRequestPool=null,this.partCompleteRequest=null,this.metaHeaders=null,this.signature=void 0,this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=i,this.request=null}return t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildNormalRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.globalConfig.uploadUrl)||void 0===t?void 0:t.file).attach("file",this.fileData),this.contentType&&this.request.field({content_type:this.contentType}),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.field({filename:this.filename}),this.contentDisposition&&this.request.field({content_disposition:this.contentDisposition}),this.urlSignType!==T.NONE&&this.request.field({url_sign:this.urlSignType}),this.globalConfig.language&&this.request.set({"iris-context-client-language":this.globalConfig.language}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.buildInitRequest=function(){var t;if(!this.contentType)throw a(!1,null,s.MEDIA_TYPE_UNKNOWN);if(this.globalConfig.retryCount>2||this.globalConfig.retryCount<0)throw a(!1,null,s.RETRY_COUNT_ERROR);if(this.globalConfig.concurrency>10||this.globalConfig.concurrency<1)throw a(!1,null,s.CONCURRENCY_ERROR);this.request=this.agent.post(null===(t=this.globalConfig.uploadUrl)||void 0===t?void 0:t.multiInit),this.contentType&&this.request.send({content_type:this.contentType}),this.extraInfo&&this.request.send({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.send({file_name:this.filename}),this.contentDisposition&&this.request.send({content_disposition:this.contentDisposition}),this.metaHeaders&&this.request.send({headers:JSON.stringify(this.metaHeaders)}),this.urlSignType!==T.NONE&&this.request.send({url_sign:this.urlSignType}),this.globalConfig.language&&this.request.set({"iris-context-client-language":this.globalConfig.language})},t.prototype.normalUpload=function(){var t,e,i,n,r,o;return U(this,void 0,void 0,(function(){var l,h,p,c;return k(this,(function(f){switch(f.label){case 0:return f.trys.push([0,6,,8]),this.buildNormalRequest(),this.signature?[3,2]:(l=this,[4,this.client.getSignature("file",this.headers)]);case 1:l.signature=f.sent(),f.label=2;case 2:if(this.isAborted)throw a(!1,null,s.REQUEST_ABORTED);return this.globalConfig.md5Config.calcFile?[4,this.getFileMd5([this.fileData])]:[3,4];case 3:(h=f.sent())&&this.request.field({content_md5:h}),f.label=4;case 4:return[4,this.request.field({sign:this.signature})];case 5:if(p=f.sent(),null===(t=null==p?void 0:p.body)||void 0===t?void 0:t.url)return[2,(null===(e=null==p?void 0:p.body)||void 0===e?void 0:e.md5)?{url:null===(i=null==p?void 0:p.body)||void 0===i?void 0:i.url,etag:null===(n=null==p?void 0:p.body)||void 0===n?void 0:n.md5,size:null===(r=this.fileData)||void 0===r?void 0:r.size}:D(D({},null==p?void 0:p.body),{size:null===(o=this.fileData)||void 0===o?void 0:o.size})];throw a(!1,p,s.FILE_UPLOAD_FAILED);case 6:return c=f.sent(),[4,Promise.reject(u(c)?c:a(!1,c,c&&"ABORTED"===c.code?s.REQUEST_ABORTED:s.FILE_UPLOAD_FAILED))];case 7:return[2,f.sent()];case 8:return[2]}}))}))},t.prototype.build=function(){return U(this,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(a(!1,null,s.FILE_EMPTY))];case 1:case 3:case 5:return[2,t.sent()];case 2:return this.fileData.size>this.globalConfig.minSizeOfSplitUpload&&(this.uploadType=O.Multipart),this.uploadType!==O.Normal?[3,4]:[4,this.normalUpload()];case 4:return[4,this.multipartUpload()]}}))}))},t.prototype.multipartUpload=function(){var t;return U(this,void 0,void 0,(function(){var e,i,n,r,o,l,h;return k(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,6,7]),[4,this.doPartInitRequest()];case 1:return e=p.sent(),[4,this.doPartUploadRequest(e)];case 2:if(i=p.sent(),n=i[0],r=i[1],o=n.reduce((function(t,e){var i;return null!==(i=t+e.partLength)&&void 0!==i?i:0}),0),o!==(null===(t=this.fileData)||void 0===t?void 0:t.size))throw a(!1,null,{CODE:s.BIG_CHECK_SIZE_FAIL.CODE,MSG:s.BIG_CHECK_SIZE_FAIL.MSG+" expect "+this.fileData.size+" and get "+o+"."});return[4,this.doPartCompleteRequest(e,r,o)];case 3:return(l=p.sent()).partDetails=n,l.size=o,r&&(l.etag=r),[2,l];case 4:return h=p.sent(),[4,Promise.reject(u(h)?h:a(!1,h,s.BIG_PART_FAIL))];case 5:return[2,p.sent()];case 6:return this.isAborted=!0,this.partRequestPool=null,[7];case 7:return[2]}}))}))},t.prototype.getFileMd5=function(t){return U(this,void 0,void 0,(function(){var e,i,n,r,o;return k(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),!(null==t?void 0:t[0]))return[2,""];e=new R,i=0,s.label=1;case 1:return i<t.length?this.isAborted?[2,""]:(r=(n=e).appendByteArray,o=Uint8Array.bind,[4,t[i].arrayBuffer()]):[3,4];case 2:r.apply(n,[new(o.apply(Uint8Array,[void 0,s.sent()]))]),s.label=3;case 3:return i++,[3,1];case 4:return[2,e.end()];case 5:return s.sent(),[2,""];case 6:return[2]}}))}))},t.prototype.doPartInitRequest=function(){var t;return U(this,void 0,void 0,(function(){var e,i;return k(this,(function(n){switch(n.label){case 0:return this.buildInitRequest(),this.signature?[3,2]:(e=this,[4,this.client.getSignature("file",this.headers)]);case 1:e.signature=n.sent(),n.label=2;case 2:if(this.isAborted)throw a(!1,null,s.REQUEST_ABORTED);return[4,this.request.send({upload_sign:this.signature})];case 3:if(i=n.sent(),null===(t=null==i?void 0:i.body)||void 0===t?void 0:t.success)return[2,this.signature];throw a(!1,i,s.BIG_INIT_FAIL)}}))}))},t.prototype.doPartUploadRequest=function(t){var e,i;return U(this,void 0,void 0,(function(){var n,r,o,u,l,h,p,g,y,m,v,_,b=this;return k(this,(function(E){switch(E.label){case 0:for(n=c(this.fileData,this.globalConfig.chunkSize),r=[],o=n.length,u=new Array(o).fill(0),l=null===(e=this.fileData)||void 0===e?void 0:e.size,h=function(e){var o=p.agent.post(null===(i=p.globalConfig.uploadUrl)||void 0===i?void 0:i.multiUpload).field({upload_sign:t}).field({total_part_num:1}).field({part_num1:e}).attach("part_file1",n[e-1]).retry(p.globalConfig.retryCount,(function(t,e){var i;return!((null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.uploaded_part_num_list)&&e.body.uploaded_part_num_list.length>0)}));p.globalConfig.language&&o.set({"iris-context-client-language":p.globalConfig.language}),p.progressCallback&&o.on("progress",(function(t){"upload"===t.direction&&t.loaded&&(u[e-1]=t.loaded,m())})),o.partLength=n[e-1].size,r.push(o)},p=this,g=1;g<=o;g++)h(g);return y=function(t,e){var i=t.reduce((function(t,e){return t+e}),0);return Math.min(i/e*100,100)},m=d((function(){b.handleProgress(y(u,l))}),300),v=function(t,e){return U(b,void 0,void 0,(function(){var i,r,o,u,l;return k(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),i="",this.globalConfig.md5Config.calcPart?[4,this.getFileMd5([n[e]])]:[3,2];case 1:(i=h.sent())&&t.field({content_md51:i}),h.label=2;case 2:return[4,t];case 3:if(r=h.sent(),(null===(l=null==r?void 0:r.body)||void 0===l?void 0:l.uploaded_part_num_list)&&r.body.uploaded_part_num_list.length>0)return o={body:r.body,partLength:t.partLength},this.globalConfig.md5Config.calcPart&&i&&(o.md5=i),[2,o];throw r;case 4:throw u=h.sent(),a(!1,u,s.BIG_PART_FAIL);case 5:return[2]}}))}))},_=Math.min(this.globalConfig.concurrency,r.length),this.partRequestPool=new f(_,v),[4,Promise.all([this.partRequestPool.start(r),this.globalConfig.md5Config.calcFile?this.getFileMd5(n):""])];case 1:return[2,E.sent()]}}))}))},t.prototype.doPartCompleteRequest=function(t,e,i){var n,r;return U(this,void 0,void 0,(function(){var o;return k(this,(function(u){switch(u.label){case 0:return this.partCompleteRequest=this.agent.post(null===(n=this.globalConfig.uploadUrl)||void 0===n?void 0:n.multiComplete).send({upload_sign:t}).send({large_file_size:i}),this.globalConfig.md5Config.calcFile&&e&&this.partCompleteRequest.send({content_md5:e}),this.globalConfig.language&&this.partCompleteRequest.set({"iris-context-client-language":this.globalConfig.language}),[4,this.partCompleteRequest];case 1:if(o=u.sent(),null===(r=null==o?void 0:o.body)||void 0===r?void 0:r.download_url)return[2,{url:o.body.download_url}];throw a(!1,o,s.BIG_COMPLETE_FAIL)}}))}))},t.prototype.abort=function(){var t,e,i;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort(),null===(e=this.partRequestPool)||void 0===e||e.abort(),null===(i=this.partCompleteRequest)||void 0===i||i.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setContentType=function(t){return this.contentType=t,this},t.prototype.setFilename=function(t){return this.filename=t,this},t.prototype.setContentDisposition=function(t){return this.contentDisposition=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setMetaHeaders=function(t){return this.metaHeaders=t,this},t.prototype.setSignature=function(t){return this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),q=L,M=function(){return M=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},M.apply(this,arguments)},H=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},G=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},F=function(){function t(t){var e=t.client,i=t.agent;this.fileData=null,this.extraInfo=null,this.urlSignType=T.NONE,this.uploadType=O.Normal,this.partRequestPool=null,this.partCompleteRequest=null,this.signature=void 0,this.createMedia=!1,this.useRemoteEndpoint=!1,this.uploadEndpoint="",this.endpointUid="",this.extraParams=void 0,this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=i,this.request=null,this.uploadUrl=this.globalConfig.uploadUrl}return t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildNormalRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.video).attach("file",this.fileData),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.extraParams&&this.request.field({extra_params:JSON.stringify(this.extraParams)}),this.createMedia&&this.request.field({create_media:!0}),this.contentDisposition&&this.request.field({content_disposition:this.contentDisposition}),this.urlSignType!==T.NONE&&this.request.field({url_sign:this.urlSignType}),this.globalConfig.language&&this.request.set({"iris-context-client-language":this.globalConfig.language}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.buildInitRequest=function(){var t;if(!this.contentType)throw a(!1,null,s.MEDIA_TYPE_UNKNOWN);if(this.globalConfig.retryCount>2||this.globalConfig.retryCount<0)throw a(!1,null,s.RETRY_COUNT_ERROR);if(this.globalConfig.concurrency>10||this.globalConfig.concurrency<1)throw a(!1,null,s.CONCURRENCY_ERROR);this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.videoMultiInit),this.contentType&&this.request.send({content_type:this.contentType}),this.extraInfo&&this.request.send({ext_info:JSON.stringify(this.extraInfo)}),this.extraParams&&this.request.send({extra_params:this.extraParams}),this.createMedia&&this.request.send({create_media:!0}),this.contentDisposition&&this.request.send({content_disposition:this.contentDisposition}),this.urlSignType!==T.NONE&&this.request.send({url_sign:this.urlSignType}),this.globalConfig.language&&this.request.set({"iris-context-client-language":this.globalConfig.language})},t.prototype.normalUpload=function(){var t,e;return H(this,void 0,void 0,(function(){var i,n,r,o,l;return G(this,(function(h){switch(h.label){case 0:return h.trys.push([0,8,,10]),this.useRemoteEndpoint?(i=this,[4,this.client.getEndpoint(this.endpointUid)]):[3,2];case 1:i.uploadEndpoint=h.sent(),this.uploadUrl=this.client.getUploadUrl(this.uploadEndpoint),h.label=2;case 2:return this.buildNormalRequest(),this.signature?[3,4]:(n=this,[4,this.client.getSignature("video",this.headers)]);case 3:n.signature=h.sent(),h.label=4;case 4:if(this.isAborted)throw a(!1,null,s.REQUEST_ABORTED);return this.globalConfig.md5Config.calcFile?[4,this.getFileMd5([this.fileData])]:[3,6];case 5:(r=h.sent())&&this.request.field({content_md5:r}),h.label=6;case 6:return[4,this.request.field({sign:this.signature})];case 7:if(o=h.sent(),null===(t=null==o?void 0:o.body)||void 0===t?void 0:t.url)return[2,M(M({},o.body),{size:null===(e=this.fileData)||void 0===e?void 0:e.size})];throw a(!1,o,s.FILE_UPLOAD_FAILED);case 8:return l=h.sent(),[4,Promise.reject(u(l)?l:a(!1,l,l&&"ABORTED"===l.code?s.REQUEST_ABORTED:s.FILE_UPLOAD_FAILED))];case 9:return[2,h.sent()];case 10:return[2]}}))}))},t.prototype.build=function(){return H(this,void 0,void 0,(function(){return G(this,(function(t){switch(t.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(a(!1,null,s.FILE_EMPTY))];case 1:case 3:case 5:return[2,t.sent()];case 2:return this.fileData.size>this.globalConfig.minSizeOfSplitUpload&&(this.uploadType=O.Multipart),this.uploadType!==O.Normal?[3,4]:[4,this.normalUpload()];case 4:return[4,this.multipartUpload()]}}))}))},t.prototype.multipartUpload=function(){var t;return H(this,void 0,void 0,(function(){var e,i,n,r,o,l,h,p;return G(this,(function(c){switch(c.label){case 0:return c.trys.push([0,6,8,9]),this.useRemoteEndpoint?(e=this,[4,this.client.getEndpoint(this.endpointUid)]):[3,2];case 1:e.uploadEndpoint=c.sent(),this.uploadUrl=this.client.getUploadUrl(this.uploadEndpoint),c.label=2;case 2:return[4,this.doPartInitRequest()];case 3:return i=c.sent(),[4,this.doPartUploadRequest(i)];case 4:if(n=c.sent(),r=n[0],o=n[1],l=r.reduce((function(t,e){var i;return null!==(i=t+e.partLength)&&void 0!==i?i:0}),0),l!==(null===(t=this.fileData)||void 0===t?void 0:t.size))throw a(!1,null,{CODE:s.BIG_CHECK_SIZE_FAIL.CODE,MSG:s.BIG_CHECK_SIZE_FAIL.MSG+" expect "+this.fileData.size+" and get "+l+"."});return[4,this.doPartCompleteRequest(i,o,l)];case 5:return(h=c.sent()).partDetails=r,h.size=l,o&&(h.etag=o),[2,h];case 6:return p=c.sent(),[4,Promise.reject(u(p)?p:a(!1,p,s.BIG_PART_FAIL))];case 7:return[2,c.sent()];case 8:return this.isAborted=!0,this.partRequestPool=null,[7];case 9:return[2]}}))}))},t.prototype.getFileMd5=function(t){return H(this,void 0,void 0,(function(){var e,i,n,r,o;return G(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),!(null==t?void 0:t[0]))return[2,""];e=new R,i=0,s.label=1;case 1:return i<t.length?this.isAborted?[2,""]:(r=(n=e).appendByteArray,o=Uint8Array.bind,[4,t[i].arrayBuffer()]):[3,4];case 2:r.apply(n,[new(o.apply(Uint8Array,[void 0,s.sent()]))]),s.label=3;case 3:return i++,[3,1];case 4:return[2,e.end()];case 5:return s.sent(),[2,""];case 6:return[2]}}))}))},t.prototype.doPartInitRequest=function(){var t;return H(this,void 0,void 0,(function(){var e,i;return G(this,(function(n){switch(n.label){case 0:return this.buildInitRequest(),this.signature?[3,2]:(e=this,[4,this.client.getSignature("video",this.headers)]);case 1:e.signature=n.sent(),n.label=2;case 2:if(this.isAborted)throw a(!1,null,s.REQUEST_ABORTED);return[4,this.request.send({sign:this.signature})];case 3:if(i=n.sent(),null===(t=null==i?void 0:i.body)||void 0===t?void 0:t.sign)return[2,i.body.sign];throw a(!1,i,s.BIG_INIT_FAIL)}}))}))},t.prototype.doPartUploadRequest=function(t){var e,i;return H(this,void 0,void 0,(function(){var n,r,o,u,l,h,p,g,y,m,v,_,b=this;return G(this,(function(E){switch(E.label){case 0:for(n=c(this.fileData,this.globalConfig.chunkSize),r=[],o=n.length,u=new Array(o).fill(0),l=null===(e=this.fileData)||void 0===e?void 0:e.size,h=function(e){var o=p.agent.post(null===(i=p.uploadUrl)||void 0===i?void 0:i.videoMultiUpload).field({sign:t}).field({part_num:e}).attach("part_file",n[e-1]).retry(p.globalConfig.retryCount,(function(t,e){var i;return!((null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.uploaded_part_num)&&e.body.uploaded_part_num>0)}));p.extraParams&&o.field({extra_params:JSON.stringify(p.extraParams)}),p.globalConfig.language&&o.set({"iris-context-client-language":p.globalConfig.language}),p.progressCallback&&o.on("progress",(function(t){"upload"===t.direction&&t.loaded&&(u[e-1]=t.loaded,m())})),o.partLength=n[e-1].size,r.push(o)},p=this,g=1;g<=o;g++)h(g);return y=function(t,e){var i=t.reduce((function(t,e){return t+e}),0);return Math.min(i/e*100,100)},m=d((function(){b.handleProgress(y(u,l))}),300),v=function(t,e){return H(b,void 0,void 0,(function(){var i,r,o,u,l;return G(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),i="",this.globalConfig.md5Config.calcPart?[4,this.getFileMd5([n[e]])]:[3,2];case 1:(i=h.sent())&&t.field({content_md5:i}),h.label=2;case 2:return[4,t];case 3:if(r=h.sent(),(null===(l=null==r?void 0:r.body)||void 0===l?void 0:l.uploaded_part_num)&&r.body.uploaded_part_num>0)return o={body:r.body,partLength:t.partLength},this.globalConfig.md5Config.calcPart&&i&&(o.md5=i),[2,o];throw r;case 4:throw u=h.sent(),a(!1,u,s.BIG_PART_FAIL);case 5:return[2]}}))}))},_=Math.min(this.globalConfig.concurrency,r.length),this.partRequestPool=new f(_,v),[4,Promise.all([this.partRequestPool.start(r),this.globalConfig.md5Config.calcFile?this.getFileMd5(n):""])];case 1:return[2,E.sent()]}}))}))},t.prototype.doPartCompleteRequest=function(t,e,i){var n,r;return H(this,void 0,void 0,(function(){var o;return G(this,(function(u){switch(u.label){case 0:return this.partCompleteRequest=this.agent.post(null===(n=this.uploadUrl)||void 0===n?void 0:n.videoMultiComplete).send({sign:t}).send({large_file_size:i}),this.globalConfig.md5Config.calcFile&&e&&this.partCompleteRequest.send({content_md5:e}),this.extraParams&&this.partCompleteRequest.send({extra_params:this.extraParams}),this.globalConfig.language&&this.partCompleteRequest.set({"iris-context-client-language":this.globalConfig.language}),[4,this.partCompleteRequest];case 1:if(o=u.sent(),null===(r=null==o?void 0:o.body)||void 0===r?void 0:r.url)return[2,null==o?void 0:o.body];throw a(!1,o,s.BIG_COMPLETE_FAIL)}}))}))},t.prototype.abort=function(){var t,e,i;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort(),null===(e=this.partRequestPool)||void 0===e||e.abort(),null===(i=this.partCompleteRequest)||void 0===i||i.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setExtraParams=function(t){return this.extraParams=t,this},t.prototype.setContentType=function(t){return this.contentType=t,this},t.prototype.setContentDisposition=function(t){return this.contentDisposition=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setSignature=function(t){return this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.setCreateMedia=function(t){return this.createMedia=t,this},t.prototype.setUseRemoteEndpoint=function(t){return this.useRemoteEndpoint=!0,t&&(this.endpointUid=t),this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),j=F,z=function(){return z=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},z.apply(this,arguments)},B=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},W=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},K=function(){function t(){this.config={scene:void 0,isProduct:void 0,retryCount:2,tag:"",token:"",timeout:{response:3e4,deadline:3e4},sceneConfig:null,envName:void 0,signatureUrl:void 0,endpointUrl:"",uploadUrl:void 0,uploadHost:"",signatureHost:"",headers:null,sceneID:"",minSizeOfSplitUpload:p(5),chunkSize:p(5),concurrency:2,versionInfo:"",withCredentials:!1,antiContent:"",md5Config:{calcFile:!0,calcPart:!1},domainPrefix:"",language:""},this.hasInit=!1,this.agent=o().agent(),this.agent.timeout(this.config.timeout),this.init=this.init.bind(this)}return t.prototype.init=function(){if(!this.config.tag)throw a(!1,null,s.TAG_UNKNOWN);if(this.config.versionInfo="?sdk_version=js-0.0.33&tag_name="+this.config.tag,this.config.sceneConfig=this.getSceneConfig(),this.config.envName=this.getEnvName(),this.config.tokenHeader=this.getTokenHeader(),this.config.signatureUrl=this.getSignatureUrl(),this.config.endpointUrl=this.getEndpointUrl(),this.config.uploadUrl=this.getUploadUrl(),"number"!=typeof this.config.minSizeOfSplitUpload||this.config.minSizeOfSplitUpload<0)throw a(!1,null,s.MIN_SIZE_OF_SPLIT_ERROR);if("number"!=typeof this.config.chunkSize||this.config.chunkSize<p(1)||this.config.chunkSize>=p(20)||this.config.chunkSize>this.config.minSizeOfSplitUpload)throw a(!1,null,s.CHUNK_SIZE_ERROR);return this.hasInit=!0,this},t.prototype.setScene=function(t){return this.config.scene=t,this},t.prototype.isProduct=function(t){return this.config.isProduct=t,this},t.prototype.setMaxRetryCount=function(t){return this.config.retryCount=t,this},t.prototype.setAccessToken=function(t){return this.config.token=t,this},t.prototype.setUploadHost=function(t){return this.config.uploadHost=t,this},t.prototype.setSignatureHost=function(t){return this.config.signatureHost=t,this},t.prototype.setSceneID=function(t){return this.config.sceneID=t,this},t.prototype.setDomainPrefix=function(t){return this.config.domainPrefix=t,this},t.prototype.setHeaders=function(t){return this.config.headers=t,this},t.prototype.setMinSizeOfSplitUpload=function(t){return this.config.minSizeOfSplitUpload=p(t),this},t.prototype.setChunkSize=function(t){return this.config.chunkSize=p(t),this},t.prototype.setConcurrency=function(t){return this.config.concurrency=t,this},t.prototype.setAntiContent=function(t){return this.config.antiContent=t,this},t.prototype.setLanguage=function(t){return this.config.language=t,this},t.prototype.getEnvName=function(){if(void 0===this.config.isProduct)throw a(!1,null,s.PRODUCT_UNKNOWN);return this.config.isProduct?"prod":"test"},t.prototype.getSceneConfig=function(){if(void 0===this.config.scene)throw a(!1,null,s.SCENE_UNKNOWN);var t=n[this.config.scene];return E[t]},t.prototype.getTokenHeader=function(){var t,e=this.config.sceneConfig;if(e.tokenName&&(e.forceToken||this.config.token)){if(this.config.token)return(t={})[e.tokenName]=this.config.token,t;if(e.forceToken)throw a(!1,null,s.TOKEN_UNKNOWN)}},t.prototype.getSignatureUrl=function(){var t,e,i=this.config.sceneConfig,r=this.config.envName,o=this.config.signatureHost||i.endpoint[r],u=this.config.uploadHost||i.uploadHost[r],l=this.config.versionInfo+(this.config.sceneID?"&scene_id="+this.config.sceneID:"");if(!o)throw a(!1,null,s.SIGNATURE_HOST_EMPTY);if(!u)throw a(!1,null,s.UPLOAD_HOST_EMPTY);if(this.config.scene===n.GENERAL&&!this.config.sceneID)throw a(!1,null,s.SCENE_ID_EMPTY);if(!this.config.signatureHost&&i.usePrefix){if(""===this.config.domainPrefix)throw a(!1,null,s.DOMAIN_PREFIX_EMPTY);o=o.replace(g,this.config.domainPrefix)}return{image:"https://"+o+(null!==(t=i.imagePath)&&void 0!==t?t:i.path)+l,file:"https://"+o+(null!==(e=i.filePath)&&void 0!==e?e:i.path)+l,video:"https://"+o+i.path+l}},t.prototype.getEndpointUrl=function(){var t=this.config.sceneConfig,e=this.config.envName;return"https://"+t.dynamicUploadConfig.endpoint[e]+t.dynamicUploadConfig.path+this.config.versionInfo},t.prototype.getUploadUrl=function(t){var e=this.config.sceneConfig,i=this.config.envName,n=(null!=t?t:this.config.uploadHost)||e.uploadHost[i];if(!t&&!this.config.uploadHost&&e.usePrefix){if(""===this.config.domainPrefix)throw a(!1,null,s.DOMAIN_PREFIX_EMPTY);n=n.replace(g,this.config.domainPrefix)}return{image:"https://"+n+e.uploadPath.image+this.config.versionInfo,file:"https://"+n+e.uploadPath.file+this.config.versionInfo,multiInit:"https://"+n+e.uploadPath.multipart.init+this.config.versionInfo,multiUpload:"https://"+n+e.uploadPath.multipart.upload,multiComplete:"https://"+n+e.uploadPath.multipart.complete,video:"https://"+n+e.uploadPath.video+this.config.versionInfo,videoMultiInit:"https://"+n+e.uploadPath.videoMultipart.init+this.config.versionInfo,videoMultiUpload:"https://"+n+e.uploadPath.videoMultipart.upload,videoMultiComplete:"https://"+n+e.uploadPath.videoMultipart.complete}},t.prototype.getSignature=function(t,e){return B(this,void 0,void 0,(function(){var i;return W(this,(function(n){switch(n.label){case 0:if(!this.config.tag)throw a(!1,null,s.TAG_UNKNOWN);return i=this.agent.post(this.config.signatureUrl[t]),this.config.tokenHeader&&i.set(this.config.tokenHeader),this.config.antiContent&&i.set({"anti-content":this.config.antiContent}),this.config.language&&i.set({"iris-context-client-language":this.config.language}),this.config.headers&&i.set(this.config.headers),e&&i.set(e),[4,i.send({bucket_tag:this.config.tag}).then((function(t){var e,i,n;if(null===(i=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.result)||void 0===i?void 0:i.signature)return t.body.result.signature;if(null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.signature)return t.body.signature;throw t})).catch((function(t){throw a(!1,t,s.GET_SIGNATURE_FAIL)}))];case 1:return[2,n.sent()]}}))}))},t.prototype.getEndpoint=function(t){return B(this,void 0,void 0,(function(){var e;return W(this,(function(i){switch(i.label){case 0:if(!this.config.tag)throw a(!1,null,s.TAG_UNKNOWN);return e=this.agent.post(this.config.endpointUrl),this.config.tokenHeader&&e.set(this.config.tokenHeader),this.config.antiContent&&e.set({"anti-content":this.config.antiContent}),this.config.language&&e.set({"iris-context-client-language":this.config.language}),t&&e.send({consistent_hash_key:t}),[4,e.send({bucket_tag:this.config.tag}).then((function(t){var e,i,n;if(null===(i=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.result)||void 0===i?void 0:i.endpoint)return t.body.result.endpoint;if(null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.endpoint)return t.body.endpoint;throw t})).catch((function(t){throw a(!1,t,s.GET_ENDPOINT_FAIL)}))];case 1:return[2,i.sent()]}}))}))},t.prototype.setTag=function(t){return this.config.tag=t,this},t.prototype.setTimeout=function(t){return this.config.timeout={response:t,deadline:t},this.agent.timeout(this.config.timeout),this},t.prototype.withCredentials=function(){return this.config.withCredentials=!0,this.agent.withCredentials(),this},t.prototype.setMd5Config=function(t){return this.config.md5Config="boolean"==typeof t?{calcFile:t,calcPart:t}:z(z({},this.config.md5Config),t),this},t.prototype.checkInitState=function(){if(!this.hasInit)throw a(!1,null,s.CLIENT_NOT_INIT)},t.prototype.uploadImage=function(){return this.checkInitState(),new I({client:this,agent:this.agent})},t.prototype.uploadFile=function(){return this.checkInitState(),new q({client:this,agent:this.agent})},t.prototype.uploadVideo=function(){return this.checkInitState(),new j({client:this,agent:this.agent})},t}(),Q=function(){return new X},X=function(){function t(){this.rules=[],this.suffix="",this.errorCollection=[]}return t.prototype.collectError=function(t){this.errorCollection=this.errorCollection.concat(t.getErrorCollection())},t.prototype.add=function(t){return this.rules.push(t.getRule()),this.collectError(t),this},t.prototype.getRule=function(){var t={rule:this.rules.join("|")};return this.suffix&&(t.suffix=this.suffix),t},t.prototype.getErrorCollection=function(){return this.errorCollection},t.prototype.setSuffix=function(t){return this.suffix=t,this},t}(),J=(i(2525),i(76464),{notEmpty:function(t,e){if(!e||0===e.length)return t+" should not be empty"},notAllEmpty:function(t,e){var i=!1;if(e.forEach((function(t){return t&&(i=!0)})),!i)return t+" should not all be empty"},percent:function(t,e){if("number"!=typeof e||e<0||e>100)return t+" should be a number from 0 to 100"},positive:function(t,e){if("number"!=typeof e||e<=0)return t+" should be a positive number"},degree:function(t,e){if("number"!=typeof e||e<0||e>360)return t+" should be a number from 0 to 360"},numberFrom1To100:function(t,e){if("number"!=typeof e||e<1||e>100)return t+" should be a number from 1 to 100"},radius:function(t,e){if("number"!=typeof e||e<1||e>50)return t+" should be a number from 1 to 50"}}),Y=function(){function t(t){this.rules=[],this.callback=t}return t.prototype.add=function(t,e,i){var n=this;return i.forEach((function(i){n.rules.push((function(){return J[i](t,e)}))})),this},t.prototype.check=function(){for(var t=[],e=0;e<this.rules.length;e++){var i=this.rules[e]();i&&t.push(i)}var n=t.join(", ");return n&&this.callback&&this.callback.call(null,n),n},t.prototype.single=function(t,e,i){return this.add(t,e,i).check()},t}(),Z=function(t){return new Y(t)},$=(N=function(t,e){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},N(t,e)},function(t,e){function i(){this.constructor=t}N(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),V=function(){function t(){}return t.prototype.thumbnailConfig=function(){return new et},t.prototype.cutConfig=function(){return new it},t.prototype.rotateConfig=function(){return new nt},t.prototype.formatConfig=function(){return new rt},t.prototype.qualityConfig=function(){return new ot},t.prototype.blurConfig=function(){return new st},t.prototype.sharpenConfig=function(){return new at},t.prototype.textWatermarkConfig=function(){return new ut},t.prototype.quickThumbnailTemplateConfig=function(){return new lt},t.prototype.tinyimgConfig=function(){return new ht},t.prototype.commonConfig=function(){return new pt},t}(),tt=function(){function t(){var t,e=this;this.errorCollection=[],this.validator=(t=function(t){return e.errorCollection.push(t)},function(){return Z(t)}),this.pipe=[],this.prefix="imageMogr2"}return t.prototype.getErrorCollection=function(){return this.errorCollection},t.prototype.getRule=function(){return this.prefix?this.prefix+this.pipe.join(""):this.pipe.join("")},t}(),et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prefix=e.prefix+"/thumbnail",e}return $(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.percentage=function(t){return this.validator().single("ThumbnailConfig:percentage:percentage",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/!"+t+"p"),this},e.prototype.percentageKeepHeight=function(t){return this.validator().single("ThumbnailConfig:percentageKeepHeight:percentage",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/!"+t+"px"),this},e.prototype.percentageKeepWidth=function(t){return this.validator().single("ThumbnailConfig:percentageKeepWidth:percentage",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/!x"+t+"p"),this},e.prototype.setWidthProportionalZoom=function(t){return this.validator().single("ThumbnailConfig:setWidthProportionalZoom:width",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/"+t+"x"),this},e.prototype.setHeightProportionalZoom=function(t){return this.validator().single("ThumbnailConfig:setHeightProportionalZoom:height",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/x"+t),this},e.prototype.limitMaxWidthAndHeight=function(t){var e=t.width,i=t.height;return this.validator().single("ThumbnailConfig:limitMaxWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:limitMaxWidthAndHeight:height",i,["notEmpty","positive"]),this.pipe.push(this._prefix+"/"+e+"x"+i),this},e.prototype.limitMinWidthAndHeight=function(t){var e=t.width,i=t.height;return this.validator().single("ThumbnailConfig:limitMinWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:limitMinWidthAndHeight:height",i,["notEmpty","positive"]),this.pipe.push(this._prefix+"/!"+e+"x"+i+"r"),this},e.prototype.setWidthAndHeight=function(t){var e=t.width,i=t.height;return this.validator().single("ThumbnailConfig:setWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:setWidthAndHeight:height",i,["notEmpty","positive"]),this.pipe.push(this._prefix+"/"+e+"x"+i+"!"),this},e.prototype.limitMaxArea=function(t){return this.validator().single("ThumbnailConfig:limitMaxArea:area",t,["notEmpty","positive"]),this.pipe.push(this._prefix+"/"+t+"@"),this},e}(tt),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.cut=function(t){var e=t.width,i=t.height,n=t.dx,r=void 0===n?0:n,o=t.dy,s=void 0===o?0:o;return this.validator().single("CutConfig:cut:width",e,["notEmpty","positive"]),this.validator().single("CutConfig:cut:height",i,["notEmpty","positive"]),this.pipe.push("/cut/"+e+"x"+i+"x"+r+"x"+s),this},e.prototype.crop=function(t){var e=t.width,i=t.height,n=t.gravity;this.validator().single("CutConfig:crop:width&height",[e,i],["notAllEmpty"]);var r="";return r=i?e?"/crop/"+e+"x"+i:"/crop/x"+i:"/crop/"+e+"x",n&&(r+="/gravity/"+n),this.pipe.push(r),this},e.prototype.iradius=function(t){return this.validator().single("CutConfig:iradius:iradius",t,["notEmpty","positive"]),this.pipe.push("/iradius/"+t),this},e.prototype.rradius=function(t){return this.validator().single("CutConfig:rradius:rradius",t,["notEmpty","positive"]),this.pipe.push("/rradius/"+t),this},e.prototype.scrop=function(t){var e=t.width,i=t.height;return this.validator().single("CutConfig:scrop:width",e,["notEmpty","positive"]),this.validator().single("CutConfig:scrop:height",i,["notEmpty","positive"]),this.pipe.push("/scrop/"+e+"x"+i),this},e}(tt),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.rotate=function(t){return this.validator().single("RotateConfig:rotate:degree",t,["notEmpty","degree"]),this.pipe.push("/rotate/"+t),this},e.prototype.autoOrient=function(){return this.pipe.push("/auto-orient"),this},e}(tt),rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=null,e.cgifValue=null,e.interlaceValue=null,e}return $(e,t),e.prototype.getRule=function(){return this.type&&"gif"!==this.type&&null!==this.cgifValue&&this.errorCollection.push("FormatConfig:cgif only supports gif"),this.type&&"jpg"!==this.type&&null!==this.interlaceValue&&this.errorCollection.push("FormatConfig:interlace only supports jpg"),this.prefix?this.prefix+this.pipe.join(""):this.pipe.join("")},e.prototype.format=function(t){return this.type=t,this.validator().single("FormatConfig:format:type",t,["notEmpty"]),this.pipe.push("/format/"+t),this},e.prototype.cgif=function(t){return this.cgifValue=t,this.validator().single("FormatConfig:cgif",t,["notEmpty","numberFrom1To100"]),this.pipe.push("/cgif/"+t),this},e.prototype.interlace=function(t){return this.interlaceValue=t,this.validator().single("FormatConfig:interlace",t,["notEmpty"]),this.pipe.push("/interlace/"+Number(t)),this},e}(tt),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.quality=function(t){if("number"==typeof t)this.validator().single("QualityConfig:quality",t,["notEmpty","percent"]),this.pipe.push("/quality/"+t);else{var e=t.quality,i=t.force,n=void 0!==i&&i;this.validator().single("QualityConfig:quality",e,["notEmpty","percent"]),this.pipe.push("/quality/"+e+(n?"!":""))}return this},e.prototype.rquality=function(t){return this.validator().single("QualityConfig:rquality",t,["notEmpty","percent"]),this.pipe.push("/rquality/"+t),this},e.prototype.lquality=function(t){return this.validator().single("QualityConfig:lquality",t,["notEmpty","percent"]),this.pipe.push("/lquality/"+t),this},e}(tt),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.blur=function(t){var e=t.radius,i=t.sigma;return this.validator().single("BlurConfig:radius",e,["notEmpty","radius"]),this.validator().single("BlurConfig:sigma",i,["notEmpty","positive"]),this.pipe.push("/blur/"+e+"x"+i),this},e}(tt),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.sharpen=function(t){return this.validator().single("SharpenConfig:sharpen",t,["notEmpty"]),("number"!=typeof t||t<10||t>300)&&this.errorCollection.push("SharpenConfig:sharpen should be a number from 10 to 300"),this.pipe.push("/sharpen/"+t),this},e}(tt),ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="watermark/2",e}return $(e,t),e.prototype.text=function(t){return this.validator().single("TextWatermarkConfig:text",t,["notEmpty"]),this.pipe.push("/text/"+l(t)),this},e.prototype.font=function(t){return this.validator().single("TextWatermarkConfig:font",t,["notEmpty"]),this.pipe.push("/font/"+l(t)),this},e.prototype.fontsize=function(t){return this.validator().single("TextWatermarkConfig:fontsize",t,["notEmpty"]),this.pipe.push("/fontsize/"+t),this},e.prototype.fill=function(t){return this.validator().single("TextWatermarkConfig:fill",t,["notEmpty"]),this.pipe.push("/fill/"+l(t)),this},e.prototype.dissolve=function(t){return this.validator().single("TextWatermarkConfig:dissolve",t,["notEmpty","numberFrom1To100"]),this.pipe.push("/dissolve/"+t),this},e.prototype.gravity=function(t){return this.validator().single("TextWatermarkConfig:gravity",t,["notEmpty"]),this.pipe.push("/gravity/"+t),this},e.prototype.dx=function(t){return this.validator().single("TextWatermarkConfig:dx",t,["notEmpty"]),this.pipe.push("/dx/"+t),this},e.prototype.dy=function(t){return this.validator().single("TextWatermarkConfig:dy",t,["notEmpty"]),this.pipe.push("/dy/"+t),this},e.prototype.batch=function(t){return this.validator().single("TextWatermarkConfig:batch",t,["notEmpty"]),t&&this.pipe.push("/batch/1"),this},e.prototype.degree=function(t){return this.validator().single("TextWatermarkConfig:degree",t,["notEmpty","degree"]),this.pipe.push("/degree/"+t),this},e}(tt),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.generateRule=function(t,e){var i=e.width,n=e.height,r=e.format,o=e.quality,s=e.force,a=e.relativeQuality,u=e.lowestQuality;this.validator().single("QuickThumbnailTemplateConfig:"+C[t]+":width&height",[i,n],["notAllEmpty"]),i&&this.validator().single("QuickThumbnailTemplate:"+C[t]+":width",i,["positive"]),n&&this.validator().single("QuickThumbnailTemplate:"+C[t]+":height",n,["positive"]),o&&this.validator().single("QuickThumbnailTemplate:"+C[t]+":quality",o,["percent"]),a&&this.validator().single("QuickThumbnailTemplate:"+C[t]+":relativeQuality",a,["percent"]),u&&this.validator().single("QuickThumbnailTemplate:"+C[t]+":lowestQuality",u,["percent"]);var l=["imageView2/"+t];return i&&l.push("/w/"+i),n&&l.push("/h/"+n),r&&l.push("/format/"+r),o&&l.push("/q/"+o+(s?"!":"")),a&&l.push("/rq/"+a),u&&l.push("/lq/"+u),l.join("")},e.prototype.limitMinAndCrop=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(C.LimitMinAndCrop,t)),this},e.prototype.limitMaxWidthAndHeight=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(C.LimitMaxWidthAndHeight,t)),this},e.prototype.limitMinWidthAndHeight=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(C.LimitMinWidthAndHeight,t)),this},e.prototype.limitMinLongAndShortEdge=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(C.LimitMinLongAndShortEdge,t)),this},e.prototype.limitMaxLongAndShortEdge=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(C.LimitMaxLongAndShortEdge,t)),this},e}(tt),ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="tinyimg",e}return $(e,t),e.prototype.singleCompression=function(t){return this.pipe.push("/mode/1/ignore-error/"+Number(t)),this},e}(tt),pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="",e}return $(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.sizeLimit=function(t){var e=t.maxSize,i=t.mustSmaller,n=t.ignoreError,r=void 0!==n&&n;return this.validator().single("CommonConfig:sizeLimit:maxSize",e,["notEmpty"]),this.pipe.push("imageMogr2/size-limit/"+e+(i?"!":"")+"/ignore-error/"+Number(r)),this},e.prototype.strip=function(){return this.pipe.push("imageMogr2/strip"),this},e.prototype.customCommand=function(t){return this.validator().single("CommonConfig:customCommand",t,["notEmpty"]),this.pipe.push(t),this},e}(tt),ct=function(){return new V},ft=K},51855:function(t,e,i){"use strict";var n=i(55532),r=i(52150),o=i(27454),s=i(7278),a="ArrayBuffer",u=o[a];n({global:!0,constructor:!0,forced:r[a]!==u},{ArrayBuffer:u}),s(a)},77581:function(t,e,i){"use strict";i(69082)("Int32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},7444:function(t,e,i){"use strict";i(69082)("Uint32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/3565_5ec50fc91f582e70012c.js.map