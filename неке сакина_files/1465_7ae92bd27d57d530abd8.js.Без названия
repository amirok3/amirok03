(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1465],{79757:function(e){e.exports={wrap:"wrap-1Ot06",bounce:"bounce-3FuQZ"}},91275:function(e){e.exports={portalContainer:"portalContainer-3kURt",portalContainerEnablePointEvents:"portalContainerEnablePointEvents-snzLk"}},51465:function(e,t,n){"use strict";n.d(t,{ZP:function(){return G}});n(44936),n(17385);var r,o,a,i=n(87184),u=n(72779),l=n.n(u),s=n(79757),c=n.n(s),f=n(42826),d=n(78245),p=n(36586),y=n(35457),h=n(13693),v=(n(69867),n(91560),n(45483),n(28813));n(12008),n(60452),n(23395),n(93801);!function(e){e.ENTER="enter_pop",e.RETAIN="retain_pop"}(r||(r={})),function(e){e.INIT="init",e.READY="ready",e.SHOWING="showing",e.DESTROY="destroy",e.PENDING="pending"}(o||(o={})),function(e){e.CPS_NATIVE_NO_QT="NoQualifiedPopup",e.CPS_NATIVE_DIVERSION_NO_QT="DiversionNoQualifiedPopup",e.CPS_NATIVE_BROWSER_TASK_REWARD="BrowserTaskRewardDialog",e.CPS_NATIVE_COUPON_BUNDLE_AWRAD_V2="CouponBundleAwardPopupV2",e.CPS_NATIVE_COUPON_BUNDLE_AWRAD_SHARE_GOODS="CouponBundleAwardPopupV2ShareGoodsPopup",e.CPS_NATIVE_COUPON_BUNDLE_REWARD_200="CouponBundleRewardPopup200",e.CPS_NATIVE_DISCOUNT_COUPON_AWARD="DiscountCouponAwardPopup",e.CPS_NATIVE_DEFAULT_LOGIN="DefaultLoginPopup",e.CPS_NATIVE_DISCOUNT_COUPON_LOGIN="DiscountCouponLoginPopup",e.CPS_NATIVE_SCRATCH_CARD_COUPON_DOUBLE_LOGIN="ScratchCardCouponDoubleLoginPopup",e.CPS_NATIVE_SCRATCH_CARD_LOGIN="ScratchCardLogionPopup",e.CPS_NATIVE_FLIP_CARD_LOGIN="FlipCardLoginPopup",e.CPS_NATIVE_CHANNEL_GOODS="ChannelGoodsPopup",e.CPS_WEB_DISCOUNT_COUPON_RETAIN="DiscountCouponRetainPopup",e.CPS_WEB_COUPON_BUNDLE_RETAIN="CouponBundleRetainPopup",e.CPS_WEB_AFFILIATE_RETAIN="AffiliateRetainPopup",e.CPS_NATIVE_LOGIN_RETAIN="LoginRetainPopup",e.CPS_NATIVE_GOODS_RETAIN="GoodsRetainPopup",e.CPS_NATIVE_COUPON_RETAIN="CouponRetainPopup",e.CPS_NATIVE_APP_RETAIN="AppRetainPopup",e.CPS_NATIVE_NO_ACTIVITY="NoActivityPopup",e.CPS_WEB_GUIDE_DOWNLOAD="GuideDownloadPopup",e.CPS_NATIVE_CART_GUIDE_ANIM="CartGuideAnim",e.CPS_NATIVE_COUPON_GUIDE="CouponGuidePopup"}(a||(a={}));var m=n(20245);function _(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function g(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var A=function(){function e(){this.modalTasks=[],this.initialized=!1,this.stashRegisterModalTasks=[]}var t,n,a,i=e.prototype;return i.init=function(e){var t,n=this,r=e.modalTasks;this.initialized?console.error("ModalManager has initialized!!!"):Array.isArray(r)&&(null==r?void 0:r.length)&&(this.modalTasks=r.map((function(e){return E({},e,{status:o.INIT,hasShow:!1})})),null==(t=this.stashRegisterModalTasks)||t.forEach((function(e){n.register(e)})),this.initialized=!0)},i.register=function(e){var t,n=e||{},r=n.type,a=n.callBack;if(Array.isArray(this.modalTasks)&&(null==(t=this.modalTasks)?void 0:t.length)){var i=this.modalTasks.find((function(e){return e.type===r}));i&&(null==i?void 0:i.status)===o.INIT&&this.ready({rsType:i.rsType,type:r,callBack:a})}else this.stashRegisterModalTasks.push(e)},i.ready=function(e){var t=this.findTargetModalIndex(e.type),n=this.modalTasks[t],r=n&&n.status===o.INIT;return r&&(this.modalTasks[t]=E({},n,{status:o.READY,callBack:e.callBack})),r},i.unRegister=function(e){var t=this.modalTasks.find((function(t){return t.type===e}));t&&(null==t?void 0:t.status)!==o.DESTROY&&(this.changeModalStatusByType(e,o.DESTROY),this.trigger(t.rsType).catch((function(){})))},i.dangerRemove=function(e){this.changeModalStatusByType(e,o.DESTROY,!0)},i.dangerRemoveMore=function(e){var t=this;e.forEach((function(e){e&&t.changeModalStatusByType(e,o.DESTROY,!0)}))},i.trigger=function(e){var t,n=this;return(t=function(){var t,r;return g(this,(function(a){switch(a.label){case 0:return n.hasShowingModal?[2]:(t=n.modalTasks.find((function(t){return t.rsType===e&&t.status===o.READY&&t.callBack})))&&"function"==typeof t.callBack?(n.changeModalStatusByType(t.type,o.PENDING),t.delayTime?[4,(0,m._)(t.delayTime)]:[3,2]):[3,4];case 1:a.sent(),a.label=2;case 2:return[4,t.callBack()];case 3:r=a.sent().success,n.changeModalStatusByType(t.type,r?o.SHOWING:o.DESTROY,r),a.label=4;case 4:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){_(a,r,o,i,u,"next",e)}function u(e){_(a,r,o,i,u,"throw",e)}i(void 0)}))})()},i.destroy=function(){this.modalTasks=[]},i.changeModalStatusByType=function(e,t,n){var r=this.modalTasks.findIndex((function(t){return t.type===e}));if(-1!==r){var o=this.modalTasks[r];this.modalTasks[r]=E({},o,{status:t,hasShown:void 0!==n?!!n:!!o.hasShown})}},i.findTargetModalIndex=function(e){return this.modalTasks.findIndex((function(t){return t.type===e}))},t=e,(n=[{key:"hasShowingModal",get:function(){var e;return null==(e=this.modalTasks)?void 0:e.some((function(e){return[(o.SHOWING,o.PENDING)].includes(e.status)}))}},{key:"enterModalAllReady",get:function(){var e,t=null==(e=this.modalTasks)?void 0:e.filter((function(e){return e.rsType===r.ENTER&&e.display}));return(null==t?void 0:t.length)>0&&t.every((function(e){return e.status===o.READY}))}}])&&T(t.prototype,n),a&&T(t,a),e}(),N=n(73366),S=n(54036);function b(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function C(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var P=(0,v.Ue)((function(e,t,n){return{modalManager:void 0,retainManager:(0,p.i5)(),overlayManager:(0,p.i5)(),modalTasks:void 0,hasExecuted:!1,prepareModalData:I((function(e,t){var n,r;return C(this,(function(o){switch(o.label){case 0:n=[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.post("api/jade/fargo/batch_rs/get",(0,S.lv)(e,[],!0))];case 2:return(r=o.sent()).success&&r.result&&Object.keys(r.result).forEach((function(e){Array.isArray(r.result[e])&&r.result[e].forEach((function(t){n.push({rsType:e,type:t.type,delayTime:t.delayTime,display:t.display})}))})),[3,4];case 3:return o.sent(),n=[],[3,4];case 4:return[2,n]}}))})),initModalManager:function(e,n,o){if(N.jU){var a=Array.isArray(t().modalTasks)?t().modalTasks:[],i=t().modalManager||new A;t().modalManager=i,(null==a?void 0:a.some((function(e){return e.rsType===r.RETAIN&&e.display})))&&(t().retainManager=n),t().overlayManager||(t().overlayManager=o),i.init({modalTasks:a}),(null==i?void 0:i.enterModalAllReady)&&!t().hasExecuted&&t().execute()}},execute:function(){var n,o,a=t(),i=a.modalManager,u=a.modalTasks,l=a.retainManager;a.hasExecuted||(e({hasExecuted:!0,reportModalList:(null==i||null==(o=i.modalTasks)||null==(n=o.map((function(e){return"ready"!==(null==e?void 0:e.status)?(null==e?void 0:e.type)+"-unregistered":null==e?void 0:e.type})))?void 0:n.join("|"))||""}),i&&(i.trigger(r.ENTER),l&&(null==u?void 0:u.find((function(e){return e.rsType===r.RETAIN&&e.display})))&&l.push({taskType:"simple",callback:function(){i.trigger(r.RETAIN),console.log("trigger retain....")}})))}}})),O=n(61658),R=n(46023),k=(0,v.Ue)((function(e){return{activeModalNumber:0,mounted:function(){e((function(e){return{activeModalNumber:e.activeModalNumber+1}}))},unMounted:function(){e((function(e){return{activeModalNumber:e.activeModalNumber-1}}))}}})),D=(n(96391),n(87246),n(7872)),w=n(95239);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=function(){var e=B((0,i.useState)(!1),2),t=e[0],n=e[1];return(0,i.useEffect)((function(){n(!0)}),[]),{mounted:t}},x=function(){return{mounted:!0}},G=function(e){var t,n=(0,O.s6)((function(e){return e.retainManager})),r=(0,i.useRef)(null),o=e||{},a=o.hideNativeCart,u=void 0===a||a,s=o.usePortal,v=void 0===s||s,m=o.enableScrollX,_=void 0!==m&&m,T=o.portalProps,E=void 0===T?{}:T,g=o.isBackToClose,A=void 0!==g&&g,S=o.onBackToClose,b=void 0===S?p.WY:S,I=o.customZIndex,C=o.modalType,M=(null==e?void 0:e.overscrollBehavior)||"contain",G=(0,O.s6)((function(e){var t;return null==(t=e.sysInfo)?void 0:t.isIOSSystem})),V=(0,O.s6)((function(e){var t;return null==(t=e.sysInfo)?void 0:t.userAgent})),j=function(e){var t=e.isIOSSystem,n=e.userAgent;if(N.jU){var r=window.innerHeight,o=screen.height,a=(0,D.Y0)(n);return"Facebook_Mobile_Feed"===(0,w.FU)(window.location.search)._x_ns_placement&&(t?r<7*o/10||r===o:o-r<100)&&a===D.iw.Facebook}return!1}({isIOSSystem:G,userAgent:V});M=j?"auto":M;var Y=null==(t=P.getState())?void 0:t.overlayManager,W=B((0,i.useState)((function(){return e.modalId||"modal_id_"+(0,y.x)(10)})),1)[0],F=(v?U:x)().mounted;(0,R.L)((function(){return k.getState().mounted(),function(){return k.getState().unMounted()}}),[]),(0,i.useEffect)((function(){var e,t=W;W&&Y&&(null==Y||null==(e=Y.push)||e.call(Y,t,{hideNativeCart:u,overscrollBehavior:M}));return function(){var e;null==Y||null==(e=Y.removeById)||e.call(Y,t)}}),[W,Y]),(0,i.useEffect)((function(){var e;if(A)return null==n||null==(e=n.push)||e.call(n,b),function(){var e;null==n||null==(e=n.removeByRef)||e.call(n,b)}}),[b,A]),(0,i.useEffect)((function(){if("contain"===M&&r.current&&F){var e=0,t=0,n=function(n){e=n.touches[0].pageY,t=n.touches[0].pageX},o=function(n){var r="";_&&(r=n.touches[0].pageX>t?"right":"left"),(0,f.fY)(n,n.touches[0].pageY>e?"up":"down",r)},a=!!f.e$&&{passive:!1},i=r.current;return i.addEventListener("touchstart",n,a),i.addEventListener("touchmove",o,a),function(){i&&(i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",o))}}}),[M,F]),(0,i.useEffect)((function(){if(F){if(!G)return;if(!r.current||"function"!=typeof r.current.querySelectorAll)return;var e=r.current.querySelectorAll("[data-scroll]");if(!e||"function"!=typeof e.forEach)return;e.forEach((function(e){if(e)try{if(!e.classList.contains(c().bounce))return void e.classList.add(c().bounce)}catch(e){}}))}}),[F]),(0,i.useEffect)((function(){C&&(0,h.A)("kuiper_common_modal_impr",{customTags:{commonModalType:C}})}),[C]);var H=function(){return i.createElement("div",{ref:r,className:l()(c().wrap,e.className),style:e.style,onClick:function(t){t.stopPropagation(),t.target===t.currentTarget&&e.onClick&&e.onClick(t)}},e.children)};return v?i.createElement(d.Z,L({enablePointEvents:!0,containerId:W,containerZIndex:I||9999},E),H()):H()}},78245:function(e,t,n){"use strict";n(69867),n(67904),n(87246),n(93801),n(17385),n(44936);var r=n(87184),o=n(91275),a=n.n(o),i=n(14726),u=n(36586),l=n(73366);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.containerStyle,n=e.containerClassName,o=e.containerAttributes,s=e.enablePointEvents,f=e.disableDefaultClassName,d=e.containerId,p=void 0===d?"bg-simple-portal-container":d,y=e.containerZIndex,h=void 0===y?1003:y,v=e.children,m=e.parentEl,_=(0,r.useRef)([]),T=c((0,r.useState)(null),2),E=T[0],g=T[1];return(0,r.useEffect)((function(){try{var e=document.querySelector("#"+p);if(e){for(var r=e.childNodes,i=[],c=0;c<r.length;c+=1)i.push(r.item(c));_.current=i}else{if(e=document.createElement("div"),o)for(var d=0,y=Object.keys(o);d<y.length;d++){var v=y[d];e.setAttribute(v,o[v])}if(t)for(var T=0,E=Object.keys(t);T<E.length;T++){var A=E[T];e.style[A]=t[A]}if(f||e.classList.add(a().portalContainer),s&&e.classList.add(a().portalContainerEnablePointEvents),n)for(var N=n.split(/\s/g).filter(u.yR),S=0;S<N.length;S++){var b=N[S];e.classList.add(b)}null!=h&&(e.style.zIndex=""+h),p&&(e.id=p);var I=document.body;"function"==typeof m?I=m():"string"==typeof m&&(I=document.querySelector(m)),I?I.appendChild(e):l.yG&&console.error("SimplePortal "+p+" parentEl empty")}return g(e),function(){try{document.body.removeChild(e)}catch(e){}}}catch(e){l.yG&&console.error(e)}}),[]),v&&l.jU&&E?(0,i.createPortal)(v,E):r.createElement(r.Fragment,null)}}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/1465_7ae92bd27d57d530abd8.js.map